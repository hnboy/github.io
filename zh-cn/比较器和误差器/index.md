# 比较器和误差放大器

## 比较器和误差放大器区别
- 输出结果的不一样 --- **离散和连续**的区别

## 比较器与放大器
- 运算放大器在不加负反馈的时候，从原理上来看可以用作比较器，但是由于放大器的开环增益非常高，它只能处理输入差分电压非常小的信号。而且在这种情况下，运算放大器的响应时间比比较器会慢很多，而且缺少一些特殊的功能，比如：滞回、内部基准。
- 比较器通常不能作为运算放大器，比较器经过调解可以提供极小的时间延迟，但是其频率响应特性会受到一定的限制，运算放大器正式利用了频响修整这个优势成为了灵活多用的器件。另外，许多比较器还有内部滞回电路，可以避免了输出震荡，但同时也让比较器不能当做当做运算放大器使用。

## 电源电压
- 传统的比较器需要$\pm15V$的双电源或者高达36V的电源源供电。<font color="green">（一些运算放大器也需要双电源工作，满足输出条件，这一点个人认为并不能作为两者之间的区别）</font> -  比较器两个输入端之间的电压在过零时候输出状态将发生改变，由于输入端通常有很小的波动电压，这些波动所产生的差模电压会导致比较器输出发生连续的变化。为了避免输出震荡，新型的比较器通常具有几mV的滞回电压。滞回电压的存在使比较器在切换点变为两个，一个用于检测上升电压，一一个用于检测下降电压。高电压门限$V_{TRIP+}$与低电压门限$V_{TRIP-}$之差等于滞回电压($V_{HYST}$),滞回比较器的失调电压$V_{OS}$是高电压门限和低电压门限的平均值。 ![滞回比较器][1]
- 不带滞回的比较器的输入电压切换点是输入失调电压，而不是理想比较器的零电压。失调电压(即切换电压)一般随温度、电源电压的变化而变化。通常用电源抑制比(PSRR)衡量这一影响，它表示标称电压的变化对失调电压的影响。理想的比较器的输入阻抗为无穷大，因此，理论上对输入信号不产生影响，而实际比较器的输入阻抗不可能做到无穷大，输入端有电流经过信号源内阻并流入比较器内部，从而产生额外的压差。偏置电流(IBIAS)定义为两个比较器输入电流的中值，用于衡量输入阻抗的影响。
## 比较器的输出
- <font color=red>不同的输出状态</font>。零电平或电源电压，具有满电源摆幅特性的比较器输出级为射极跟随器，这使得其输出信号与电源摆幅之间仅有极小的压差。该压差取决于比较器内部晶体管饱和状态下的集电极与发射极之间的电压。CMOS满摆幅比较器的输出电压取决于饱和状态下的MOSFET，与双极型晶体管结构相比，在轻载情况下电压更接近于电源电压。比较器属于
开环电路，比较输出端的$$u_1$$和$$u_2$$电压大小，当正输入端电压较大的时候，输出高电平(比较器属于OC输出，需要加上拉电阻，上拉几伏就输出几伏)；当负极电压较大的时候，输出低电平(GND).

- <font color=red>输出延迟时间</font>是选择比较器的关键参数。延迟时间包括信号通过元器件产生的传输延时和信号的上升时间与下降时间，对于高速比较器，如MAX961、MAX9010-MAX9013，其延迟时间的典型值分别达到4.5ns和5ns，上升时间为2.3ns和3ns (注意：传输延时的测量包含了上升时间)。设计时需注意不同因素对延迟时间的影响(图2)，其中包括温度、容性负载、输入过驱动等因素。对于反相输入，传输延时用tPD-表示；对于同相输入，传输延时用tPD+表示。TPD+与tPD-之差称为偏差。电源电压对传输延时也有较大影响。
## 实际比较器应用

- 第1个例子是电平转换器，可完成3V逻辑至5V逻辑的变换。
  ![比较器][2]
- 如图4所示，漏极开路输出比较器，如MAX986，提供了一个极为简捷的实现方案，同样，如果比较器供电电压允许(如MAX972)，也可实现±5V双极性逻辑至3V单极性逻辑的电平转换。具体应用时应注意输入信号不要超出电源电压的摆幅，流入输出端的电流由大阻值的上拉电阻限制(参考MAX986数据资料的Absolute Maximum Ratings)。 
  该电路可将双极性输入（这里为正弦波)转换为单极性的方波输出，外加的偏置电压为

  ![阻值][3]
$$V_{OS}=\frac{V_{CC}R_1R_2+V_2R_1R_3}{R_1R_2+R_1R_3+R_2R_3}$$ 

两个阻值相同的电阻(R4)将比较器切换检测门限设置在电源电压的一半。
- 图6所示是利用四个比较器构成一个电流检测电路，可用于指示输入电流的四个范围，旁路电阻用于将输入电流转换为电压信号，R1-R2用于设置运算放大器的增益，并为比较器提供所需要的基准电压。R4-R7用来设置不同数字输出状态所对应的检测门限。 

  ![电流量测解决方案][4]



[1]: /images/比较器和误差器/1.png "1.png"
[2]: /images/比较器和误差器/2.png "2.png"
[3]: /images/比较器和误差器/3.png "3.png"
[4]: /images/比较器和误差器/4.png "4.png"

