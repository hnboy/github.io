# 集成运算放大电路

## 理想集成运放特点

- 开环差模电压放大倍数$A_{u0}\rightarrow\infty$
- 输入阻抗$R_{id}\rightarrow\infty$
- 输出阻抗$R_{o}\rightarrow0$
- 共模抑制比$K_{CMR}\rightarrow\infty$
- 此外认为器件的频带为无限宽，没有失调现象等
  **Addition：**差分式放大电路，就其功能来说就时放大两个输入信号之差。在电路完全对称的情况下，输出信号电压可以表示为$V_o=A_{uo}(V_{i1}-V_{i2})$

### 工作在线性区的集成运放

- 由于理想集成运放$A_{uo}\rightarrow\infty$,故可以认为两个输入端之间的差模电压近似为零，即$u_{id}=u_--u_+\approx0$即$u_-=u_+$,由于两个输入端之间的电压近似为零，而又不是短路，故称为**“虚短”**
- 由于理想集成运放的输入电阻$R_{id}\rightarrow\infty$,故可以认为两个输入端不娶电流，这样输入相当于断路，而又不是断开，所以称为**"虚断"**。

### 基本运算电路

- 比例运算电路

  ![Alt text](/images/集成运算放大电路/1450940023854.png#center)

  根据虚短和虚断的特点，反向输入端与地端等电位（称为**“虚地”**），因此计算可得
  $$i_1=\frac{u_1}{R_1},i_F=\frac{u_--u_o}{R_f}=\frac{-uo}{R_f}$$
  又因$i_-=0$,故$i_1=i_F$则可得$u_o=-\frac{R_f}{R_1}u_1$ 式中负号表示输出电压与输入点的相位相反。
  其中电压放大倍数为$$A_{uf}=\frac{uo}{u_i}=-\frac{R_f}{R_1}$$改变$R_f$和$R_1$的比值，即可改变其放大倍数。
  图中运放的同相输入端接有电阻$R_2$,参数选择应使两输入端外界直流通路等效电阻值平衡，即$R_2=R_1//R_f$,静态时使输入级偏置电流平衡并让输入级的偏置电流在运算放大器两个输入端的外接电阻上产生相等的压降，以便消除放大器的偏置电流以及漂移的影响，故$R_2$又称为**平衡电阻**

- 同相比例运算电路

  ![Alt text](/images/集成运算放大电路/1450940990785.png#center)

  如果输入信号从同相输入端输入，而反向输入端通过电阻接地，并引入负反馈，这种称为同比例运算电路
  由虚短、虚短性质可知 $u_-=\frac{R_1}{R_1+R_f}u_o=u_+=u_I$
  $$i_F=\frac{u_-u_0}{R} ①$$
  $$i_1=-\frac{u_-}{R_1}②$$
  可以推出$$u_o=\left(1+\frac{R_f}{R_1}\right)u_1$$
  则电压放大倍数为$$A_{uf}=\frac{u_o}{u_1}=1+\frac{R_f}{R_1}$$
  由上式可以看出电路的与反相比例运算电路一样，输入输出也是符号比例关系，不同的是输出电压与输入电压相位相同。
  如果此时去掉$R_1$是的输入和输出电压相同，起到电压跟随作用，故称为这样的电路为电压跟随器如下图所示

  ![Alt text](/images/集成运算放大电路/1450943172387.png#center)

- 加法运算电路
  如下图所示是对两个输入限号求和的电路，信号有反向输入端引入，同相端通过一个电阻接地,如下所示称为**加法电路**

  ![Alt text](/images/集成运算放大电路/1450943247126.png#center)

  由上图可以计算如下
  $$i_{11}=\frac{u_{11}}{R_1}$$
  $$i_{12}=\frac{u_{12}}{R_2}$$
  $$i_{11}+i_{12}=i_f$$
  不难推出$$u_o=\left(\frac{u_{11}}{R_1}+\frac{u_{12}}{R_2}\right)-R_f$$
  当$\begin{smallmatrix}R_1=R_2=R\end{smallmatrix}$ 时 $$u_o=-\frac{R_f}{R}(u_{11}+u_{12})$$
- 减法运算电路
  当在同相和方向输入端分别加入两个信号时候，如下所示称为**差分运算电路**

  ![Alt text](/images/集成运算放大电路/1450944131530.png#center)

  根据虚短、虚断原理来计算可以得:
  $$\left(\frac{u_{11}-u_-}{R_1}\right)=\left(\frac{u_--u_o}{R_f}\right)\Rightarrow uo=\left(1+\frac{R_f}{R_1}\right)u_+-\frac{R_f}{R_1}u_{11}$$
  其中: $\begin{smallmatrix}u_-=u_+=(\frac{R_f}{R_1+R_f})u_{12}\end{smallmatrix}$
  如果: $\begin{smallmatrix}R_1=R'_{1},R_f=R'_f\end{smallmatrix}$ 
  
  可以证明输入电压为: $$u_o=\frac{R_{f}}{R_{1}}(u_{12}-u_{11})$$
  上式表明，适当选择电阻参数，是的输出电压与两个输入电压的差值成比例，故差值放大电路也称为加法运算电路。

**归类总结**

| 相位 | 种类             | 特点                                               |
| ---- | ---------------- | -------------------------------------------------- |
| 同相 | 同相比例运算电路 | 电压跟随器                                         |
| 同相 | 减法运算电路     | 输出端透过一个电阻连接反向输入端                   |
| 反相 | 反向比例运算电路 | 同相输入透过电阻接地                               |
| 反向 | 加法运算电路     | 同相输入端透过一个电阻接地，反向输入端两个输入电压 |


## 积分与微积分电路

- 基本积分电路
  如下图是一个基本积分电路

  ![Alt text](/images/集成运算放大电路/1450949445110.png#center)

  因为$i_-=i_+=0$,故$u_-=u_+=0$流过电阻R的电流和流过电容C的电流可以认为近似相等，即$\begin{smallmatrix}i_c=i_1=\frac{u_1}{R}\end{smallmatrix}$,对该电流对电容镜像充电，电容两端电压即为输入电压，故
  $$u_o=-\frac{1}{C}\int_{t0}^ti_c\,\mathrm{d}t+uc\mid_{t0} = -\frac{1}{RC}\int_{t0}^{t}u_1\,\mathrm{d}t+uc\mid_{t0}$$其中$\begin{smallmatrix}u_c\mid_{t0}\end{smallmatrix}$是$t_0$时刻电容两端的电压，即初始值。
- 基本微分电路

  将积分电路中电阻和电容元件位置对换，便构成了基本微分电路如下图所示

  ![Alt text](/images/集成运算放大电路/1450950459151.png#center)


## 例题 积分电路计算

- 电路如下图所示

  ![Alt text](/images/集成运算放大电路/1450951170018.png#center)

1. 写出输入与输出关系；
2. 若$u_1=+1V$，电容器两端初始电压$u_c=0$，求：输出电压$u_o$变为0V所需要的时间。
   解：有图可知，图中$A_1$为积分器，$A_2$为反向加法器，所以可以推出：
   $$u_{o1}=-\frac{1}{RC}\int_{t0}^{t1}u_1\,\mathrm{d}t+u_c\mid_{t0=0}$$
   $$u_0=-u_{01}-u_1$$
   (2) 因$\begin{smallmatrix}u_c\mid_{t0=0}=0,u_1=+1V\end{smallmatrix}$则
   $$u_o=\frac{u_1}{RC}t_1-u_1=0$$
   故$$t_1=RC=10S$$

