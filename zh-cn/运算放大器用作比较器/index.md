# 运算放大器用作比较器


## 为什么要将运算放大器用作比较器？
- 方便
- 经济
- 低$I_B$
- 低$V_{OS}$ 
  比较器专门针对干净快速的切换而设计的，所有许多直流参数不如运算放大器。当电路
  对直流参数有较高要求的时候可以考虑使用运算放大器。反之如果电路中速度很重要就不能使用。

## 为什么大多数情况不把运算放大器用作比较器
- 速度
- 输入结构不方便
- 逻辑结构不方便
- 稳定性/迟滞

###  许多比较器的速度都非常快,为什么将运算放大器用作比较器时造成低速度?

- 比较器设计用于大差分输入电压，而运算放大器一般用于驱动闭环系统，在负反馈的作用下，其输入电压差降至非常低.当运算放大器过载时候，有时候几毫伏也可能导致过载，其中有些放大级可能发生饱和。这种情况下，器件要相对较长的时候从饱和中恢复，如果发生饱和，其速度将慢很多。


现代运算放大器多采用轨到轨输出，其最大正电平接近正电源，最低负电平接近负电源。(老式设计所用架构的两个供电轨都具有1.5 V以上的动态余量。)

如果逻辑和运算放大器共用同一电源，轨到轨运算放大器可成功驱动CMOS和TTL逻辑系列，但是，如果运算放大器和逻辑采用不同电源，则需在两者之间另外设置接口电路。注意，这种情况采用于采用±5 V电源的运算放大器，必须用+5 V电源驱动逻辑；如果施加-5 V电源，则可能损坏逻辑。

最简单的接口电路就是变换器，可能以NPN晶体管制成，但这些元件需会基极吸取电流。更为方便的是N-沟道MOSFET晶体管。如下图所示 

![接口电路][1]

RB设定晶体管基极电流，RL则设定集电极/漏极的电流。该电流越小，变换器速度就越快，但其功耗也越大。通常使用几千欧姆的数值。N-沟道MOS器件应采用低栅极阈值电压(<2 V)和高于运算放大器最大输出电压的栅源击穿电压。一般±25 V就够了。尽管运算放大器和逻辑使用不同的电源，但必须相互连接。运算放大器正电源+VA必须比逻辑负电源-VL高至少3 V，才能提供足够电压来开启晶体管或MOSFET栅极。另外，运算放大器负电源相对于逻辑负电源不能为正，但可与其相连。当然，必须遵循全部所用器件的绝对最大额定值。
补充MOS变换器可采用一个P-沟道和一个N-沟道MOSFET。这样做的优势在于没有待机电流，但在切换过程中，两个器件同时开启时会产生大电流尖峰。在这种设计中，运算放大器正电源+VA必须等于或大于逻辑正电源+VL。另外，运算放大器负电源必须等于或小于逻辑负电源。如下图所示

![补充mos变换电路][2]

## 注意事项
### 相位反转
- 老式FET输入放大器，会有相位翻转的现象。如果输入超过允许的共模范围，反相和同相输入将互换角色。

### 不稳定性
- 将运放用作比较器的时候没有负反馈，开环增益非常高。在跃迁期间即使是很小的正反馈也可能激发震荡。反馈可能来自输出与同相输入之间的电容，也可能来自共地阻抗中存在的输出电流。

[1]: /images/运算放大器用作比较器/1.png "1.png"
[2]: /images/运算放大器用作比较器/2.png "2.png"



